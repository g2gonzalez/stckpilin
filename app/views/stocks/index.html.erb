<div class="jumbotron dashboard">
  <h1>StockPile Dashboard</h1>
</div>

<div class="row">
  <div class="col-md-9 .col-sm-9 .col-xs-9">
<div class="table-responsive">
  <table id="stocks" class="table table-hover">
    <thead>
    <tr>
      <th>Name</th>
      <th>Quantity</th>
      <th>Store</th>
      <th>Buy Price</th>
      <th>Sell Price</th>
      <th>Show</th>
      <th>Edit</th>
      <th>Destroy</th>
    </tr>
    </thead>
    <tbody>
    <% @stocks.each do |stock| %>
      <tr>
        <td><%= "#{ stock.name }" %></td>
        <td><%= "#{ stock.quantity }" %></td>
        <td><%= "#{ stock.store.name }" %></td>
        <td><%= "$#{ stock.buy_price }" %></td>
        <td><%= "$#{ stock.sell_price }" %></td>
        <td><%= link_to "Show", stock_path( stock ), class: "btn btn-xs btn-success" %></td>
        <td><%= link_to "Edit", edit_stock_path( stock ), class: "btn btn-xs btn-warning" %></td>
        <td><%= link_to "Destroy", stock_path( stock ), method: :delete, class: "btn btn-xs btn-danger", data: { confirm: "Are you sure?"} %></td>
        <% @buy_total += stock.quantity.to_i * stock.buy_price.to_i %>
        <% @sell_total += stock.quantity.to_i * stock.sell_price.to_i %>
        <% @profit = @sell_total - @buy_total %>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>
</div>

<div class="col-md-3 .col-sm-3 .col-xs-3">
  <ul class="list-group">
    <li class="list-group-item">
      <span class="badge"><%= "#{ @quantity_total }" %></span>
      Quantity Total
    </li>
    <li class="list-group-item">
      <span class="badge">$<%= "#{ @buy_total }" %></span>
      Total Spent
    </li>
    <li class="list-group-item">
      <span class="badge">$<%= "#{ @sell_total }" %></span>
      Total Sold
    </li>
    <li class="list-group-item">
      <span class="badge">$<%= "#{ @profit }" %></span>
      Total Profit
    </li>
  </ul>
</div>
</div>

<hr>
<%= link_to "Add Stock", new_stock_path, class: "btn btn-primary" %>
<%= link_to "Add Category", categories_path, class: "btn btn-default" %>

